{% extends "layout.html" %}

{% block content %}
<div class="container mt-5">
    <div class="card border rounded" style="border-color: black;">
        <div class="card-header">
            <h2>{{ thread.title }}</h2>
            {% if current_user.is_authenticated and (current_user.is_admin or current_user.id == thread.author_id) %}
            <form action="{{ url_for('delete_thread', thread_id=thread.id) }}" method="POST" onsubmit="return confirm('Är du säker att du vill ta bort denna tråd?');">
                <button type="submit" class="btn btn-danger"><i class="fas fa-trash-alt"></i> Radera</button>
            </form>
            {% endif %}
        </div>
        <div class="card-body">
            <p>{{ thread.content }}</p>
            <p class="text-muted">Skapad av {{ thread.author.username }} | {{ thread.timestamp.strftime('%B %d, %Y') }}</p>

            <a href="{{ url_for('reply_thread', thread_id=thread.id) }}" class="text-dark"><i class="fa-solid fa-reply"></i> Svara på inlägget.</a>
        </div>
    </div>
</div>

<h4 class="mt-5">Tidigare Svar</h4>
{% if replies %}
    <ul class="list-group mb-4">
        {% for reply in replies %}
        <li class="list-group-item">
            <p>{{ reply.content }}</p>
            <p class="text-muted">Skapad av {{ reply.author.username }} | {{ reply.timestamp.strftime('%B %d, %Y') }}</p>
        </li>
    {% endfor %}
    {% else %}
        <p>Ingen har svarat på tråden ännu...</p>
    {% endif %}
    </ul>
{% endblock %}